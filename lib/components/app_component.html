<div class="mdc-layout-grid">

  <h1>F-Maschine</h1>

  <div class="mdc-layout-grid__inner">
    <div class="mdc-layout-grid__cell">
      <h2>Stack</h2>

      <pre class="memory-block">
        <span *ngFor="let value of vm.stack"
              class="memory-cell number-value">{{value}}</span>
      </pre>
    </div>

    <div class="mdc-layout-grid__cell">
      <h2>Heap</h2>
      <pre class="memory-block">
        <heap-allocated-object *ngFor="let obj of vm.heap.values"
                              [taggedObject]="obj"></heap-allocated-object>
      </pre>
    </div>

    <div class="mdc-layout-grid__cell"
         [ngSwitch]="mode">
      <h2>program memory</h2>

      <pre *ngSwitchCase="executionMode"
           class="memory-block">
        <span *ngFor="let instruction of vm.program; let i = index"
              class="memory-cell">
          {{instruction}}
          <span *ngIf="i==vm.programCounter"
                class="pointer-indicator">PC</span>
        </span>
      </pre>

      <div *ngSwitchCase="editingMode">
        <pre>
          <textarea wrap="off"
                    class="assembly-editor"
                    [(ngModel)]="editorInput"></textarea>
        </pre>
        <ul>
          <li class="error"
              *ngFor="let error of parseErrors">{{error}}</li>
        </ul>
      </div>

      <div>
        <material-button raised
                         [disabled]="mode != executionMode"
                         (trigger)="executeSingleInstruction()">
          <material-icon icon="skip_next"></material-icon>
        </material-button>
        <material-button raised
                         [disabled]="mode != executionMode"
                         (trigger)="initializeVM()">
          <material-icon icon="replay"></material-icon>
        </material-button>

        <material-button *ngSwitchCase="executionMode"
                         raised
                         (trigger)="activateEditingMode()">
          <material-icon icon="create"></material-icon>
        </material-button>
        <material-button *ngSwitchCase="editingMode"
                         raised
                         (trigger)="activateExecutionMode()">
          <material-icon icon="save"></material-icon>
        </material-button>
      </div>
    </div>
  </div>
</div>
